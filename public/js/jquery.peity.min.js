// Peity jQuery plugin version 0.6.1
// (c) 2012 Ben Pickles
//
// http://benpickles.github.com/peity/
//
// Released under MIT license.
(function(i,k){function o(a,f){var b=k.createElement("canvas");b.setAttribute("width",a*m);b.setAttribute("height",f*m);1!=m&&b.setAttribute("style","width:"+a+"px;height:"+f+"px");return b}var e=i.fn.peity=function(a,f){k.createElement("canvas").getContext&&this.each(function(){i(this).change(function(){var b=i.extend({},e.defaults[a],f),d=this;i.each(b,function(a,c){i.isFunction(c)&&(b[a]=c.call(d))});var c=i(this).html();e.graphers[a].call(this,b);i(this).trigger("chart:changed",c)}).trigger("change")});
return this};e.graphers={};e.defaults={};e.add=function(a,f,b){e.graphers[a]=b;e.defaults[a]=f};var m=window.devicePixelRatio||1;e.add("pie",{colours:["#FFF4DD","#FF9900"],delimeter:"/",diameter:16},function(a){var f=i(this),b=f.text().split(a.delimeter),d=parseFloat(b[0]),b=parseFloat(b[1]),d=2*d/b*Math.PI,b=o(a.diameter,a.diameter),c=b.getContext("2d"),h=b.width/2;c.translate(h,h);c.rotate(-Math.PI/2);c.beginPath();c.moveTo(0,0);c.arc(0,0,h,0,0==d?2*Math.PI:d,!0);c.fillStyle=a.colours[0];c.fill();
c.beginPath();c.moveTo(0,0);c.arc(0,0,h,0,d,!1);c.fillStyle=a.colours[1];c.fill();f.wrapInner(i("<span>").hide()).append(b)});e.add("line",{colour:"#c6d9fd",strokeColour:"#4d89f9",strokeWidth:1,delimeter:",",height:16,max:null,min:0,width:32},function(a){var f=i(this),b=o(a.width,a.height),d=f.text().split(a.delimeter);1==d.length&&d.push(d[0]);var c=Math.max.apply(Math,d.concat([a.max])),h=Math.min.apply(Math,d.concat([a.min])),g=b.getContext("2d"),e=b.width,l=b.height,q=e/(d.length-1),c=l/(c-h),
n=[],j;g.beginPath();g.moveTo(0,l+h*c);for(j=0;j<d.length;j++){var k=j*q,p=l-c*(d[j]-h);n.push({x:k,y:p});g.lineTo(k,p)}g.lineTo(e,l+h*c);g.fillStyle=a.colour;g.fill();if(a.strokeWidth){g.beginPath();g.moveTo(0,n[0].y);for(j=0;j<n.length;j++)g.lineTo(n[j].x,n[j].y);g.lineWidth=a.strokeWidth*m;g.strokeStyle=a.strokeColour;g.stroke()}f.wrapInner(i("<span>").hide()).append(b)});e.add("bar",{colour:"#4D89F9",delimeter:",",height:16,max:null,min:0,width:32},function(a){var f=i(this),b=f.text().split(a.delimeter),
d=Math.max.apply(Math,b.concat([a.max])),c=Math.min.apply(Math,b.concat([a.min])),h=o(a.width,a.height),g=h.getContext("2d"),e=h.height,d=e/(d-c),l=m/2,k=(h.width+l)/b.length;g.fillStyle=a.colour;for(a=0;a<b.length;a++)g.fillRect(a*k,e-d*(b[a]-c),k-l,d*b[a]);f.wrapInner(i("<span>").hide()).append(h)})})(jQuery,document);